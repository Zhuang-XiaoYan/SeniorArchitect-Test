# 软件架构设计

---
软件架构设计
1. 软件架构的概念
2. 软件架构风格
3. 架构描述语言ADL
4. 特定领域软件架构
5. 基于架构的软件开发
6. 软件质量属性
7. 软件架构评估
8. 软件产品线
9. 构件与中间件技术
10. Web架构设计
---

# 一、软件架构的概念

![img.png](images/01.png)

1. 软件架构风格是描述某一特定应用领域中系统组织方式的惯用模式。架构风格定义一个系统家族，即一个体系结构定义一个词汇表和一组约束。词汇表中包含一些构件和连接件类型，而这组约束指出系统是如何将这些构件和连接件组合起来的。
2. 软件架构为软件系统提供了一个结构、行为和属性的高级抽象，由构成系统的元素的描述、这些元素的相互作用、指导元素集成的模式以及这些模式的约束组成。
3. 软件架构是项目干系人进行交流的手段，明确了对系统实现的约束条件，决定了开发和维护组织的组织结构，制约着系统的质量属性
4. 软件架构使推理和控制的更改更加简单，有助于循序渐进的原型设计，可以作为培训的基础
5. 软件架构是可传递和可复用的模型，通过研究软件架构可能预测软件的质量

![img.png](images/02.png)

1. 结构模型以架构的构件、连接件和其他概念来刻画结构
2. 框架模型∶不太侧重描述结构的细节而更侧重于整体的
3. 结构动态模型︰系统的“大颗粒”的行为性质
4. 过程模型∶构建系统的步骤和过程
5. 功能模型︰由一组功能构件按层次组成，下层向上层提供服务

![img.png](images/03.png)

# 二、软件架构风格

* 架构设计的一个核心问题是能否达到架构级的软件复用
* 架构风格反映了领域中众多系统所共有的结构和语义特性，并指导如何将各个构件有效地组织成一个完整的系统
* 架构风格定义了用于描述系统的术语表和一组指导构建系统的规则

软件架构风格类型
1. 数据流风格︰批处理序列、管道-过滤器
2. 调用/返回风格:主程序/子程序、面向对象、层次结构
3. 独立构件风格∶进程通信、事件驱动系统(隐式调用)
4. 虚拟机风格︰解释器、基于规则的系统
5. 仓库风格︰数据库系统、超文本系统、黑板系统

## 2.1 数据流风格

![img.png](images/04.png)

![img.png](images/05.png)

批处理序列
- 构件为一系列固定顺序的计算单元，构件之间只通过数据传递交互。每个处理步骤是一个独立的程序，
每一步必须在其前一步结束后才能开始，**数据必须是完整的，以整体的方式传递**。

管道-过滤器
- 每个构件都有一组输入和输出，构件读输入的数据流，经过内部处理，然后产生输出数据流。这个过程通常是通过对输入数据流的变换或计算来完成的，
包括通过计算和增加信息以丰富数据、通过浓缩和删除以精简数据、通过改变记录方式以转化数据和递增地转化数据等。
这里的构件称为过滤器，连接件就是**数据流**传输的管道将一个过滤器的输出传到另一个过滤器的输入。
- 早期编译器就是采用的这种架构。要一步一步处理的，均可考虑采用此架构风格。

## 2.2 调用/返回风格

主程序/子程序
- 单线程控制，把问题划分为若千个处理步骤，构件即为主程序和子程序，子程序通常可合成为模块。
过程调用作为交互机制，即充当连接件的角色。调用关系具有层次性，其语义逻辑表现为主程序的正确性取决于它调用的子程序的正确性
面向对象

- 构件是对象，对象是抽象数据类型的实例。在抽象数据类型中，数据的表示和它们的相应操作被封装起来，
对象的行为体现在其接受和请求的动作。连接件即是对象间交互的方式，对象是通过函数和过程的调用来交互的
层次结构

- 构件组织成一个层次结构，连接件通过决定层间如何交互的协议来定义。每层为上一层提供服务，使用下一层的服务，
只能见到与自己邻接的层。通过层次结构，可以将大的问题分解为若干个渐进的小问题逐步解决，可以隐藏问题的复杂度。
修改某一层，最多影响其相邻的两层（通常只能影响上层)

![img.png](images/06.png)

## 2.3 独立构件风格(隐式调用)

进程通信
- 构件是独立的过程，**连接件是消息传递**。构件通常是命名过程，消息传递的方式可以是点对点、异步或同步方式，以及远程过程（方法）调用等。

事件驱动系统(隐式调用)
- 构件不直接调用一个过程，而是触发或广播一个或多个事件。构件中的过程在一个或多个事件中注册，
当某个事件被触发时，系统自动调用在这个事件中注册的所有过程。一个事件的触发就导致了另一个模块中的过程调用。
这种风格中的构件是匿名的过程，它们之间交互的连接件往往是以过程之间的隐式调用来实现的。
主要优点是为软件复用提供了强大的支持，为构件的维护和演化带来了方便;其缺点是构件放弃了对系统计算的控制。

## 2.4 虚拟机风格

解释器（自定义需求的场景）
- 解释器通常包括一个完成解释工作的解释引擎、一个包含将被解释的代码的存储区、一个记录解释引擎当前工作状态的数据结构，
以及一个记录源代码被解释执行的进度的数据结构。具有解释器风格的软件中含有一个虚拟机，
可以仿真硬件的执行过程和一些关键应用，其缺点是执行效率比较低。

基于规则的系统
- 基于规则的系统包括规则集、规则解释器、规则/数据选择器和工作内存，一般用在人工智能领域和DSS中。

## 2.5 仓库风格

仓库风格中构件分两种:一种是中央数据结构，保存系统的当前状态;另一种是独立构件，对中央数据存储进行操作。
1. 数据库系统
2. 黑板系统
  - 包括知识源、黑板和控制三部分。知识源包括若干独立计算的不同单元，提供解决问题的知识。
  知识源响应黑板的变化，也只修改黑板;黑板是一个全局数据库，包含问题域解空间的全部状态，
  是知识源相互作用的唯一媒介;知识源响应是通过黑板状态的变化来控制的。
  黑板系统通常应用在对于解决问题没有确定性算法的软件中(**信号处理、问题规划和编译器优化等**)。
3. 超文本系统
  - 构件以网状链接方式相互连接，用户可以在构件之间进行按照人类的联想思维方式任意跳转到相关构件。
  超文本是一种非线性的网状信息组织方法，它以结点为基本单位，链作为结点之间的联想式关联。超文本系统通常应用在互联网领域。

现代集成编译环境一般采用这种架构风格。

![img.png](images/07.png)

![img.png](images/08.png)

## 2.6 闭环控制架构

当软件被用来操作一个物理系统时，软件与硬件之间可以粗略地表示为一个反馈循环，这个反馈循环通过接受一定的输入，
确定一系列的输出，最终使环境达到一个新的状态。适合于嵌入式系统，涉及连续的动作与状态。

![img.png](images/09.png)

## 2.7 C2风格

C2架构的基本规则︰
- 构件和连接件都有一个顶部和一个底部
- 构件的顶部要连接到连接件的底部，构件的底部要连接到连接件的顶部，构件之间不允许直连
- 一个连接件可以和任意数目的其它构件和连接件连接
- 当两个连接件进行直接连接时，必须由其中一个的底部到另一个的顶部。

![img.png](images/10.png)

## 2.8 分层架构风格

![img_1.png](images/11.png)

![img.png](images/12.png)

![img.png](images/13.png)

![img.png](images/14.png)

![img.png](images/15.png)

## 2.9 MVC架构风格



# 三、架构描述语言ADL

# 四、特定领域软件架构

# 五、基于架构的软件开发

# 六、软件质量属性

# 七、软件架构评估

# 八、软件产品线

# 九、构件与中间件技术

# 十、Web架构设计

